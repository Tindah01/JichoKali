#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Skip performance checks in CI to avoid double-checking
if [ "$CI" = "true" ]; then
  echo "â­ï¸  Skipping performance checks in CI (will run in GitHub Actions)"
  exit 0
fi

echo "ğŸ¯ Running performance budget checks..."

# Run performance budget check
npm run performance:full

if [ $? -ne 0 ]; then
  echo "âŒ Performance budget check failed!"
  echo "ğŸ”§ Please optimize your build before committing."
  echo "ğŸ’¡ Run 'npm run performance:analyze' to analyze bundle composition."
  exit 1
fi

echo "âœ… Performance budget checks passed!"